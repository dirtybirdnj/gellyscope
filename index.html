<!DOCTYPE html>
<!-- index.html - v41 -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ü™º Gellyscope üå∏</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Tab Navigation -->
    <div class="tab-nav">
      <button class="tab-button" data-tab="camera">Camera</button>
      <button class="tab-button" data-tab="images">Images</button>
      <button class="tab-button" data-tab="vectors">Vectors</button>
      <button class="tab-button" data-tab="trace">Trace</button>
      <button class="tab-button active" data-tab="scope">Scope</button>
    </div>

    <!-- Camera Tab -->
    <div class="tab-content" id="cameraTab">
      <div class="camera-container">
        <div class="camera-preview" id="cameraPreview">
          <video id="cameraVideo" autoplay playsinline></video>
          <canvas id="captureCanvas" style="display: none;"></canvas>
          <div class="camera-message" id="cameraMessage">Click "Start Camera" to begin</div>
        </div>
        <div class="camera-controls">
          <button class="control-btn" id="startCamera">Start Camera</button>
          <button class="control-btn" id="capturePhoto" disabled>Capture Photo</button>
          <button class="control-btn" id="stopCamera" disabled>Stop Camera</button>
        </div>
      </div>
    </div>

    <!-- Images Tab -->
    <div class="tab-content" id="imagesTab">
      <div class="images-container">
        <div class="image-grid" id="imageGrid">
          <!-- Jellyfish placeholders -->
        </div>
      </div>
    </div>

    <!-- Vectors Tab -->
    <div class="tab-content" id="vectorsTab">
      <div class="vectors-container">
        <div class="vector-grid" id="vectorGrid">
          <!-- Vector files will appear here -->
        </div>
      </div>
    </div>

    <!-- Trace Tab -->
    <div class="tab-content" id="traceTab">
      <div class="container">
        <!-- Left Panel: Layers -->
        <div class="left-panel">
          <div class="panel-header">Layers</div>
          <div class="layers-list" id="traceLayersList">
            <div style="padding: 16px; text-align: center; opacity: 0.5; font-size: 13px;">
              No layers
            </div>
          </div>
        </div>

        <!-- Center: Image Viewer -->
        <div class="canvas-area">
          <div class="trace-viewer" id="traceViewer">
            <div class="trace-message" id="traceMessage">
              Select an image from the Images tab to trace it
            </div>
            <img id="traceImage" style="display: none; max-width: 100%; max-height: 100%; object-fit: contain;">
          </div>
        </div>

        <!-- Right Panel: Controls -->
        <div class="right-panel">
          <div class="panel-header">Trace Controls</div>
          <div class="trace-controls" id="traceControls">
            <!-- Contrast Slider -->
            <div class="control-group">
              <label class="control-label">Contrast</label>
              <input type="range" class="control-slider" id="contrastSlider" min="0" max="100" value="50">
              <span class="control-value" id="contrastValue">50</span>
            </div>

            <!-- Dot Size Slider -->
            <div class="control-group">
              <label class="control-label">Dot Size</label>
              <input type="range" class="control-slider" id="dotSizeSlider" min="1" max="20" value="5">
              <span class="control-value" id="dotSizeValue">5</span>
            </div>

            <!-- Trace Button -->
            <button class="trace-action-btn" id="traceActionBtn">Trace</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Scope Tab -->
    <div class="tab-content active" id="scopeTab">
      <div class="container">
        <!-- Left Panel: Tree Structure -->
        <div class="left-panel">
          <div class="panel-header">SVG Structure</div>
          <div class="layers-list" id="layersList">
            <div style="padding: 16px; text-align: center; opacity: 0.5; font-size: 13px;">
              No file loaded
            </div>
          </div>
        </div>

        <!-- Center: Canvas -->
        <div class="canvas-area">
          <!-- Fixed Toolbar -->
          <div class="canvas-toolbar" id="canvasToolbar">
            <!-- Edit Controls -->
            <div class="toolbar-group">
              <button class="svg-control-btn" id="cropBtn" title="Crop" style="width: auto; padding: 0 12px; gap: 6px;">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M 2 5 L 5 5 L 5 2 M 11 2 L 11 5 L 14 5 M 14 11 L 11 11 L 11 14 M 5 14 L 5 11 L 2 11" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span style="font-size: 13px;">Crop</span>
              </button>
              <div class="toolbar-divider"></div>
              <button class="svg-control-btn" id="flipHorizontal" title="Flip Horizontal" style="font-size: 18px;">‚ÜîÔ∏è</button>
              <button class="svg-control-btn" id="flipVertical" title="Flip Vertical" style="font-size: 18px;">‚ÜïÔ∏è</button>
            </div>

            <!-- View Controls -->
            <div class="toolbar-group">
              <button class="svg-control-btn active" id="fitViewport" title="Fit to Viewport">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <rect x="2" y="2" width="12" height="12" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M 5 5 L 8 8 L 11 5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M 5 11 L 8 8 L 11 11" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              </button>
              <button class="svg-control-btn" id="fullSize" title="Full Size">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <rect x="2" y="2" width="12" height="12" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M 2 2 L 5 5 M 14 2 L 11 5 M 2 14 L 5 11 M 14 14 L 11 11" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              </button>
            </div>

            <!-- Zoom Controls -->
            <div class="toolbar-group">
              <button class="svg-control-btn" id="zoomOut" title="Zoom Out">‚àí</button>
              <div class="zoom-level" id="zoomLevel">100%</div>
              <button class="svg-control-btn" id="zoomIn" title="Zoom In">+</button>
              <button class="svg-control-btn" id="zoomReset" title="Reset Zoom">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <circle cx="8" cy="8" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M 6 8 L 10 8 M 8 6 L 8 10" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="canvas-content" id="canvasContent">
            <div class="upload-zone">
              <input type="file" id="fileInput" accept=".svg" />
              <button class="upload-btn" id="uploadBtn">
                Upload SVG File
              </button>
              <div class="upload-text">
                or drag and drop an SVG file here
              </div>
            </div>
          </div>
          
          <!-- Bottom Info Bar -->
          <div class="canvas-info-bar" id="canvasInfoBar">
            <div class="info-bar-item">
              <span class="info-bar-label">Element:</span>
              <span class="info-bar-value" id="infoBarElement">‚Äî</span>
            </div>
            <div class="info-bar-divider"></div>
            <div class="info-bar-item">
              <span class="info-bar-label">X:</span>
              <span class="info-bar-value" id="infoBarX">‚Äî</span>
            </div>
            <div class="info-bar-item">
              <span class="info-bar-label">Y:</span>
              <span class="info-bar-value" id="infoBarY">‚Äî</span>
            </div>
            <div class="info-bar-divider"></div>
            <div class="info-bar-item">
              <span class="info-bar-label">Width:</span>
              <span class="info-bar-value" id="infoBarWidth">‚Äî</span>
            </div>
            <div class="info-bar-item">
              <span class="info-bar-label">Height:</span>
              <span class="info-bar-value" id="infoBarHeight">‚Äî</span>
            </div>
            <div class="info-bar-divider"></div>
            <div class="info-bar-item">
              <span class="info-bar-label">Children:</span>
              <span class="info-bar-value" id="infoBarChildren">‚Äî</span>
            </div>
          </div>
        </div>

        <!-- Right Panel: Info -->
        <div class="right-panel">
          <div class="panel-header">Element Properties</div>
          <div class="info-content" id="infoContent">
            <div style="padding: 16px; text-align: center; opacity: 0.5; font-size: 13px;">
              Select an element to view properties
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>